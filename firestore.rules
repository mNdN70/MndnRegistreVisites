/**
 * @file Firebase Security Rules for Visit Logging Application
 * @core Philosophy: This ruleset prioritizes simplicity and security, enabling basic visit logging functionality.  It provides open read access to visit and employee data and restricts write access.
 * @data Structure:
 *   - /persons_to_visit/{personToVisitId}: Stores information about company employees who can receive visitors.
 *   - /visits/{visitId}: Stores records of visits, including visitor details, timestamps, and the person being visited.
 * @key Security Decisions:
 *   - Public read access is granted to both `persons_to_visit` and `visits` collections.
 *   - No write access to `persons_to_visit` or `visits` is granted, as this is a prototype.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description: Rules for the `/persons_to_visit/{personToVisitId}` collection. Allows public read access.  No writes are allowed.
     * @path: /persons_to_visit/{personToVisitId}
     * @allow: (get, list) - Any user can read person to visit data.
     * @deny: (create, update, delete) - No user can create, update, or delete person to visit data.
     * @principle: Provides open read access to employee data, while prohibiting writes.
     */
    match /persons_to_visit/{personToVisitId} {
      allow get: if true;
      allow list: if true;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description: Rules for the `/visits/{visitId}` collection. Allows public read access. No writes are allowed.
     * @path: /visits/{visitId}
     * @allow: (get, list) - Any user can read visit data.
     * @deny: (create, update, delete) - No user can create, update, or delete visit data.
     * @principle: Provides open read access to visit data, while prohibiting writes.
     */
    match /visits/{visitId} {
      allow get: if true;
      allow list: if true;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }
  }
}